<!DOCTYPE html>
<html>
<head>
    <title>Mental Abilities Quiz</title>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f8ff;
        }
        h1 {
            color: #4CAF50;
            margin-top: 20px;
        }
        .question {
            font-size: 20px;
            margin: 20px;
        }
        .options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        .button {
            padding: 10px 20px;
            background-color: #008cba;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        .button:hover {
            background-color: #005f73;
        }
        #result {
            margin-top: 20px;
            font-size: 18px;
            color: #333;
        }
    </style>
</head>
<body>
    <h1>Mental Abilities Quiz</h1>
    <div id="quiz">
        <div class="question" id="question">Loading...</div>
        <div class="options" id="options"></div>
    </div>
    <div id="result"></div>
    
    <py-script>
        import random

        def generate_question():
            num1 = random.randint(1, 10)
            num2 = random.randint(1, 10)
            operation = random.choice(["+", "-", "*"])
            if operation == "+":
                answer = num1 + num2
            elif operation == "-":
                answer = num1 - num2
            else:
                answer = num1 * num2
            return f"{num1} {operation} {num2}", answer

        def display_question():
            question, correct_answer = generate_question()
            Element("question").element.innerText = question
            options = [correct_answer] + [random.randint(1, 100) for _ in range(3)]
            random.shuffle(options)
            options_html = "".join(
                f'<button class="button" onclick="check_answer({option}, {correct_answer})">{option}</button>'
                for option in options
            )
            Element("options").element.innerHTML = options_html

        def check_answer(selected, correct):
            if selected == correct:
                Element("result").element.innerText = "Correct! ğŸ‰"
                display_question()
            else:
                Element("result").element.innerText = "Wrong! Try again. âŒ"

        display_question()
    </py-script>
</body>
</html>
import random
from kivy.app import App
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.gridlayout import GridLayout
from kivy.uix.label import Label
from kivy.uix.button import Button
from kivy.uix.togglebutton import ToggleButton
from kivy.uix.slider import Slider
from kivy.uix.screenmanager import ScreenManager, Screen
from kivy.graphics import Color, Rectangle


class MainMenu(Screen):
    def __init__(self, **kwargs):
        super().__init__(**kwargs)

        self.selected_difficulty = 1  # Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
        self.selected_time_limit = 5  # Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
        self.high_score = 0  # Ø£Ø¹Ù„Ù‰ Ø³ÙƒÙˆØ±

        # Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
        self.layout = BoxLayout(orientation='vertical', spacing=20, padding=20)
        self.add_widget(self.layout)

        # Ø¥Ø¹Ø¯Ø§Ø¯ Ø®Ù„ÙÙŠØ© Ù…Ù„ÙˆÙ†Ø© ØªØ¯Ø±ÙŠØ¬ÙŠØ©
        with self.canvas.before:
            Color(0.1, 0.1, 0.4, 1)  # Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (Ø£Ø²Ø±Ù‚ ØºØ§Ù…Ù‚)
            self.bg_rect = Rectangle(size=self.size, pos=self.pos)
        self.bind(size=self.update_bg, pos=self.update_bg)

        # Ø§Ù„Ø¹Ø¨Ø§Ø±Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ÙŠØ©
        self.welcome_label = Label(
            text="[b][color=#FFFFFF]ğŸ§  Welcome to Mental Abilities Quiz ğŸ§ [/color][/b]",
            font_size='30sp',
            size_hint=(1, 0.2),
            markup=True,
            halign="center",
        )
        self.layout.add_widget(self.welcome_label)

        # Ø¹Ø±Ø¶ Ø£Ø¹Ù„Ù‰ Ø³ÙƒÙˆØ±
        self.high_score_label = Label(
            text=f"[b][color=#FFD700]â­ High Score: {self.high_score} â­[/color][/b]",
            font_size='22sp',
            size_hint=(1, 0.1),
            markup=True,
            halign="center",
        )
        self.layout.add_widget(self.high_score_label)

        # Ø§Ø®ØªÙŠØ§Ø± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø©
        self.layout.add_widget(Label(text="Choose Difficulty Level:", font_size='20sp', size_hint=(1, 0.1)))
        difficulty_layout = GridLayout(cols=3, spacing=10, size_hint=(1, 0.2))
        self.easy_button = ToggleButton(text="Easy (+, -)", group="difficulty", size_hint=(1, 1), state="down")
        self.easy_button.bind(on_press=self.set_difficulty)
        difficulty_layout.add_widget(self.easy_button)

        self.medium_button = ToggleButton(text="Medium (Ã—, Ã·)", group="difficulty", size_hint=(1, 1))
        self.medium_button.bind(on_press=self.set_difficulty)
        difficulty_layout.add_widget(self.medium_button)

        self.hard_button = ToggleButton(text="Hard (Mix)", group="difficulty", size_hint=(1, 1))
        self.hard_button.bind(on_press=self.set_difficulty)
        difficulty_layout.add_widget(self.hard_button)

        self.layout.add_widget(difficulty_layout)

        # Ø§Ø®ØªÙŠØ§Ø± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ÙˆÙ‚Øª
        time_layout = BoxLayout(orientation='vertical', spacing=10, size_hint=(1, 0.3))
        self.layout.add_widget(Label(text="Set Time Limit:", font_size='20sp', size_hint=(1, 0.1)))

        self.time_label = Label(
            text="Time Limit: 5 seconds",
            font_size='18sp',
            size_hint=(1, 0.1),
            halign="center",
        )
        time_layout.add_widget(self.time_label)

        self.time_slider = Slider(
            min=1,
            max=5,  # Ø¥Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø± "Ø¨Ù„Ø§ ÙˆÙ‚Øª"
            value=1,
            step=1,
            size_hint=(1, 0.7)
        )
        self.time_slider.bind(value=self.set_time_limit)
        time_layout.add_widget(self.time_slider)

        self.layout.add_widget(time_layout)

        # Ø²Ø± "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨"
        self.start_button = Button(
            text="ğŸ® Start Quiz ğŸ®",
            font_size='24sp',
            size_hint=(1, 0.2),
            background_color=(0.3, 0.7, 0.3, 1)
        )
        self.start_button.bind(on_press=self.start_quiz)
        self.layout.add_widget(self.start_button)

    def update_bg(self, *args):
        """ØªØ­Ø¯ÙŠØ« Ø­Ø¬Ù… ÙˆÙ…ÙˆÙ‚Ø¹ Ø§Ù„Ø®Ù„ÙÙŠØ©"""
        self.bg_rect.size = self.size
        self.bg_rect.pos = self.pos

    def set_difficulty(self, instance):
        """ØªØ­Ø¯ÙŠØ¯ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ø§Ù„Ù…Ø®ØªØ§Ø±"""
        if instance.text == "Easy (+, -)":
            self.selected_difficulty = 1
        elif instance.text == "Medium (Ã—, Ã·)":
            self.selected_difficulty = 2
        elif instance.text == "Hard (Mix)":
            self.selected_difficulty = 3

    def set_time_limit(self, instance, value):
        """ØªØ­Ø¯ÙŠØ¯ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ÙˆÙ‚Øª Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ±"""
        time_values = {1: "5 seconds", 2: "10 seconds", 3: "20 seconds", 4: "30 seconds", 5: "No Time Limit"}
        self.time_label.text = f"Time Limit: {time_values[int(value)]}"

        if int(value) == 5:
            self.selected_time_limit = None  # Ø¨Ù„Ø§ ÙˆÙ‚Øª
        else:
            self.selected_time_limit = [5, 10, 20, 30][int(value) - 1]

    def start_quiz(self, instance):
        """Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©"""
        quiz_screen = self.manager.get_screen("quiz")
        quiz_screen.set_difficulty(self.selected_difficulty)
        quiz_screen.set_time_limit(self.selected_time_limit)
        quiz_screen.generate_question()
        self.manager.current = "quiz"

    def update_high_score(self, score):
        """ØªØ­Ø¯ÙŠØ« Ø£Ø¹Ù„Ù‰ Ø³ÙƒÙˆØ±"""
        if score > self.high_score:
            self.high_score = score
            self.high_score_label.text = f"[b][color=#FFD700]â­ High Score: {self.high_score} â­[/color][/b]"


class QuizScreen(Screen):
    def __init__(self, **kwargs):
        super().__init__(**kwargs)

        # Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
        self.layout = BoxLayout(orientation='vertical', spacing=20, padding=20)
        self.add_widget(self.layout)

        # Ø¥Ø¹Ø¯Ø§Ø¯ Ø®Ù„ÙÙŠØ© Ù…Ù„ÙˆÙ†Ø©
        with self.canvas.before:
            Color(0.1, 0.3, 0.5, 1)  # Ù„ÙˆÙ† Ø®Ù„ÙÙŠØ© Ø£Ø²Ø±Ù‚
            self.bg_rect = Rectangle(size=self.size, pos=self.pos)
        self.bind(size=self.update_bg, pos=self.update_bg)

        # Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙƒÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠ
        self.score = 0
        self.score_label = Label(
            text=f"[b][color=#FFD700]Score: {self.score}[/color][/b]",
            font_size='22sp',
            size_hint=(1, 0.1),
            markup=True,
            halign="center",
        )
        self.layout.add_widget(self.score_label)

        # Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø³Ø¤Ø§Ù„
        self.question_label = Label(
            text="Question will appear here!",
            font_size='28sp',
            size_hint=(1, 0.2),
            markup=True,
            halign="center",
        )
        self.layout.add_widget(self.question_label)

        # Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
        self.answer_layout = GridLayout(cols=2, spacing=10, size_hint=(1, 0.6))
        self.buttons = []
        for i in range(4):  # Ø¥Ù†Ø´Ø§Ø¡ 4 Ø£Ø²Ø±Ø§Ø± Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø©
            btn = Button(
                text=f"Option {i+1}",
                font_size='20sp',
                background_normal='',
                background_color=(0.3, 0.6, 0.9, 1),  # Ù„ÙˆÙ† Ø£Ø²Ø±Ù‚
            )
            btn.bind(on_press=self.check_answer)
            self.buttons.append(btn)
            self.answer_layout.add_widget(btn)
        self.layout.add_widget(self.answer_layout)

        # Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        self.back_button = Button(
            text="Back to Menu",
            font_size='18sp',
            size_hint=(1, 0.1),
            background_normal='',
            background_color=(0.8, 0.3, 0.3, 1)  # Ù„ÙˆÙ† Ø£Ø­Ù…Ø±
        )
        self.back_button.bind(on_press=self.go_back)
        self.layout.add_widget(self.back_button)

        self.correct_answer = None
        self.difficulty = 1  # Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
        self.time_limit = None  # Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ

    def update_bg(self, *args):
        """ØªØ­Ø¯ÙŠØ« Ø­Ø¬Ù… ÙˆÙ…ÙˆÙ‚Ø¹ Ø§Ù„Ø®Ù„ÙÙŠØ©"""
        self.bg_rect.size = self.size
        self.bg_rect.pos = self.pos

    def set_difficulty(self, level):
        """ØªØ­Ø¯ÙŠØ¯ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø©"""
        self.difficulty = level

    def set_time_limit(self, time_limit):
        """ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙˆÙ‚Øª"""
        self.time_limit = time_limit

    def generate_question(self):
        """ØªÙˆÙ„ÙŠØ¯ Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø©"""
        num1 = random.randint(1, 10)
        num2 = random.randint(1, 10)

        if self.difficulty == 1:  # Easy: Ø¬Ù…Ø¹ ÙˆØ·Ø±Ø­
            operation = random.choice(['+', '-'])
        elif self.difficulty == 2:  # Medium: Ø¶Ø±Ø¨ ÙˆÙ‚Ø³Ù…Ø©
            operation = random.choice(['*', '/'])
            if operation == '/':  # Ø¶Ù…Ø§Ù† Ø§Ù„Ù‚Ø³Ù…Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
                num2 = random.randint(1, 10)
                num1 = num2 * random.randint(1, 10)
        else:  # Hard: Ø®Ù„ÙŠØ· Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
            operation = random.choice(['+', '-', '*', '/'])
            if operation == '/':  # Ø¶Ù…Ø§Ù† Ø§Ù„Ù‚Ø³Ù…Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
                num2 = random.randint(1, 10)
                num1 = num2 * random.randint(1, 10)

        # ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
        self.correct_answer = eval(f"{num1} {operation} {num2}")

        # Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„ Ù…Ø¹ Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„Ù…Ø­Ø³Ù†Ø©
        operation_display = operation
        if operation == '/':
            operation_display = 'Ã·'
        elif operation == '*':
            operation_display = 'Ã—'
        self.question_label.text = f"[b][color=#FFFFFF]What is {num1} {operation_display} {num2}?[/color][/b]"

        # ØªÙˆÙ„ÙŠØ¯ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
        options = [self.correct_answer]
        while len(options) < 4:
            wrong_answer = self.correct_answer + random.randint(-10, 10)
            if wrong_answer != self.correct_answer and wrong_answer not in options:
                options.append(wrong_answer)

        random.shuffle(options)
        for i, btn in enumerate(self.buttons):
            btn.text = str(round(options[i], 2))  # ØªÙ‚Ø±ÙŠØ¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª

    def check_answer(self, instance):
        """Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©"""
        if float(instance.text) == self.correct_answer:
            self.score += 10  # Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù†Ù‚Ø§Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
            self.update_score()
            self.generate_question()  # ØªÙˆÙ„ÙŠØ¯ Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯
        else:
            self.manager.current = "menu"  # Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø·Ø£

    def update_score(self):
        """ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³ÙƒÙˆØ± Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶"""
        self.score_label.text = f"[b][color=#FFD700]Score: {self.score}[/color][/b]"

    def go_back(self, instance):
        """Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"""
        self.manager.current = "menu"


class MathQuizApp(App):
    def build(self):
        sm = ScreenManager()

        # Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        sm.add_widget(MainMenu(name="menu"))

        # Ø¥Ø¶Ø§ÙØ© Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
        sm.add_widget(QuizScreen(name="quiz"))

        return sm


MathQuizApp().run()
